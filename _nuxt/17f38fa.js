(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{506:function(t,e,r){"use strict";r(8),r(10),r(16),r(17);var a=r(0),n=(r(5),r(26),r(13),r(25),r(59),r(491),r(44),r(492),r(493),r(494),r(495),r(496),r(497),r(498),r(499),r(500),r(501),r(502),r(503),r(504),r(45),r(58),r(9),r(69),r(297),r(1)),s=r(85),o=r(2);function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){Object(a.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var l=["sm","md","lg","xl"],d=l.reduce((function(t,e){return t[e]={type:[Boolean,String,Number],default:!1},t}),{}),u=l.reduce((function(t,e){return t["offset"+Object(o.D)(e)]={type:[String,Number],default:null},t}),{}),f=l.reduce((function(t,e){return t["order"+Object(o.D)(e)]={type:[String,Number],default:null},t}),{}),m={col:Object.keys(d),offset:Object.keys(u),order:Object.keys(f)};function p(t,e,r){var a=t;if(null!=r&&!1!==r){if(e){var n=e.replace(t,"");a+="-".concat(n)}return"col"!==t||""!==r&&!0!==r?(a+="-".concat(r)).toLowerCase():a.toLowerCase()}}var v=new Map;e.a=n.a.extend({name:"v-col",functional:!0,props:c(c(c(c({cols:{type:[Boolean,String,Number],default:!1}},d),{},{offset:{type:[String,Number],default:null}},u),{},{order:{type:[String,Number],default:null}},f),{},{alignSelf:{type:String,default:null,validator:function(t){return["auto","start","end","center","baseline","stretch"].includes(t)}},tag:{type:String,default:"div"}}),render:function(t,e){var r=e.props,n=e.data,o=e.children,i=(e.parent,"");for(var c in r)i+=String(r[c]);var l=v.get(i);return l||function(){var t,e;for(e in l=[],m)m[e].forEach((function(t){var a=r[t],n=p(e,t,a);n&&l.push(n)}));var n=l.some((function(t){return t.startsWith("col-")}));l.push((t={col:!n||!r.cols},Object(a.a)(t,"col-".concat(r.cols),r.cols),Object(a.a)(t,"offset-".concat(r.offset),r.offset),Object(a.a)(t,"order-".concat(r.order),r.order),Object(a.a)(t,"align-self-".concat(r.alignSelf),r.alignSelf),t)),v.set(i,l)}(),t(r.tag,Object(s.a)(n,{class:l}),o)}})},507:function(t,e,r){"use strict";r(8),r(10),r(16),r(17);var a=r(0),n=(r(5),r(58),r(75),r(37),r(13),r(25),r(59),r(491),r(44),r(492),r(493),r(494),r(495),r(496),r(497),r(498),r(499),r(500),r(501),r(502),r(503),r(504),r(45),r(9),r(297),r(1)),s=r(85),o=r(2);function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){Object(a.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var l=["sm","md","lg","xl"],d=["start","end","center"];function u(t,e){return l.reduce((function(r,a){return r[t+Object(o.D)(a)]=e(),r}),{})}var f=function(t){return[].concat(d,["baseline","stretch"]).includes(t)},m=u("align",(function(){return{type:String,default:null,validator:f}})),p=function(t){return[].concat(d,["space-between","space-around"]).includes(t)},v=u("justify",(function(){return{type:String,default:null,validator:p}})),b=function(t){return[].concat(d,["space-between","space-around","stretch"]).includes(t)},g=u("alignContent",(function(){return{type:String,default:null,validator:b}})),h={align:Object.keys(m),justify:Object.keys(v),alignContent:Object.keys(g)},y={align:"align",justify:"justify",alignContent:"align-content"};function O(t,e,r){var a=y[t];if(null!=r){if(e){var n=e.replace(t,"");a+="-".concat(n)}return(a+="-".concat(r)).toLowerCase()}}var _=new Map;e.a=n.a.extend({name:"v-row",functional:!0,props:c(c(c({tag:{type:String,default:"div"},dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:f}},m),{},{justify:{type:String,default:null,validator:p}},v),{},{alignContent:{type:String,default:null,validator:b}},g),render:function(t,e){var r=e.props,n=e.data,o=e.children,i="";for(var c in r)i+=String(r[c]);var l=_.get(i);return l||function(){var t,e;for(e in l=[],h)h[e].forEach((function(t){var a=r[t],n=O(e,t,a);n&&l.push(n)}));l.push((t={"no-gutters":r.noGutters,"row--dense":r.dense},Object(a.a)(t,"align-".concat(r.align),r.align),Object(a.a)(t,"justify-".concat(r.justify),r.justify),Object(a.a)(t,"align-content-".concat(r.alignContent),r.alignContent),t)),_.set(i,l)}(),t(r.tag,Object(s.a)(n,{staticClass:"row",class:l}),o)}})},608:function(t,e,r){"use strict";r.r(e);var a=r(471),n=r(522),s=r(489),o=r(539),i=r(506),c=r(488),l=r(595),d=r(593),u=r(131),f=r(507),m=r(546),p=r(482),v=r(588),b=r(66),g=r(505),h=(r(13),r(8),r(10),r(5),r(16),r(9),r(17),r(0)),y=(r(171),r(114));function O(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function _(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?O(Object(r),!0).forEach((function(e){Object(h.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var j={data:function(){return{dialog:!1,dialogDelete:!1,editdialog:!1,headers:[{text:"Order No.#",value:"orderNumber"},{text:"Total Amount",value:"amount"},{text:"Control Number",value:"controlNumber"},{text:"Status",value:"status"},{text:"Created On",value:"createdAt"},{text:"Customer Id",value:"CustomerId"},{text:"Updated On",value:"updatedAt"},{text:"Actions",value:"actions",sortable:!1}],ords:[],editedIndex:-1,editedItem:{productId:2},paymentreq:{action:400,orderId:null},defaultItem:{productId:2}}},computed:_(_({},Object(y.c)({orders:"tokenpurchases",products:"products",meters:"meters"})),{},{formTitle:function(){return-1===this.editedIndex?"Place new order":"Edit customer"}}),created:function(){this.$store.dispatch("_fetchtokenpurchases")},methods:{editItem:function(t){this.editedIndex=this.orders.indexOf(t),this.editedItem=Object.assign({},t),this.editedItem.meterId=t.MeterId,this.paymentreq.orderId=this.editedItem.id,this.editdialog=!0},deleteItem:function(t){this.editedIndex=this.orders.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0},deleteItemConfirm:function(){this.orders.splice(this.editedIndex,1),this.closeDelete()},close:function(){var t=this;this.dialog=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},closeDelete:function(){var t=this;this.dialogDelete=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},addProduct:function(){this.ords.push(this.editedItem)},makeOrderPayment:function(t){var e=this;this.paymentreq.action=t,this.$store.dispatch("_makeorderpayment",this.paymentreq).then((function(t){e.editdialog=!1}))},save:function(){this.editedIndex>-1||this.$store.dispatch("_placenewtokenorder",this.editedItem),this.close()},getStatusColor:function(t){switch(t){case"100":default:return"white";case"200":return"success lighten-3";case"300":return"blue lighten-3";case"400":return"teal";case"500":return"red lighten-4"}}}},k=r(63),x=Object(k.a)(j,(function(){var t=this,e=t._self._c;return t.orders?e(l.a,{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.orders,"sort-by":"calories"},scopedSlots:t._u([{key:"top",fn:function(){return[e(b.a,{attrs:{color:"primary",flat:""}},[e(g.a,{staticClass:"text-h4 white--text"},[t._v("Token Purchases")]),t._v(" "),e(p.a),t._v(" "),e(d.a,{attrs:{"max-width":"500px"},scopedSlots:t._u([null],null,!0),model:{value:t.editdialog,callback:function(e){t.editdialog=e},expression:"editdialog"}},[t._v(" "),e(n.a,[e(b.a,{attrs:{color:"primary",flat:"",dark:""}},[e(g.a,[e("span",{staticClass:"text-h5"},[t._v(t._s(t.formTitle))])]),t._v(" "),e(p.a)],1),t._v(" "),e(s.b,[e(c.a,[e(f.a,{staticClass:"d-flex justify-space-between"},["100"==t.editedItem.statusCode?e(i.a,{attrs:{cols:"12",sm:"12",md:"4"}},[e(a.a,{staticClass:"px-8",attrs:{small:"",color:"blue lighten-2",dark:""},on:{click:function(e){return t.makeOrderPayment(200)}}},[e(u.a,{attrs:{left:""}},[t._v("mdi-check-all")]),t._v("\n                  Approve")],1)],1):t._e(),t._v(" "),"200"==t.editedItem.statusCode?e(i.a,{attrs:{cols:"12",sm:"12",md:"4"}},[e(a.a,{staticClass:"px-8",attrs:{small:"",color:"success"},on:{click:function(e){return t.makeOrderPayment(300)}}},[e(u.a,{attrs:{left:""}},[t._v("mdi-progress-check")]),t._v("Process")],1)],1):t._e(),t._v(" "),"300"==t.editedItem.statusCode?e(i.a,{attrs:{cols:"12",sm:"12",md:"4"}},[e(a.a,{staticClass:"px-8",attrs:{small:"",color:"success"},on:{click:function(e){return t.makeOrderPayment(400)}}},[e(u.a,{attrs:{left:""}},[t._v("mdi-account-credit-card")]),t._v("Make Payment")],1)],1):t._e(),t._v(" "),"400"!=t.editedItem.statusCode?e(i.a,{attrs:{cols:"12",sm:"12",md:"4"}},[e(a.a,{staticClass:"px-8",attrs:{small:"",color:"warning"},on:{click:function(e){return t.makeOrderPayment(500)}}},[t._v("Cancel")])],1):t._e()],1)],1)],1),t._v(" "),e(s.a,[e(p.a),t._v(" "),e(a.a,{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.editdialog=!t.editdialog}}},[t._v(" Cancel ")])],1)],1)],1),t._v(" "),e(d.a,{attrs:{"max-width":"50%"},scopedSlots:t._u([{key:"activator",fn:function(r){var n=r.on,s=r.attrs;return[e(a.a,t._g(t._b({staticClass:"mb-2 px-4",attrs:{color:"success",dark:""}},"v-btn",s,!1),n),[e(u.a,{attrs:{left:""}},[t._v(" mdi-plus ")]),t._v("\n           Buy Token\n          ")],1)]}}],null,!1,1016474631),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),e(n.a,[e(b.a,{attrs:{color:"primary",flat:"",dark:""}},[e(g.a,[e("span",{staticClass:"text-h5"},[t._v(t._s(t.formTitle))])]),t._v(" "),e(p.a),t._v(" "),e(a.a,{attrs:{color:"white",icon:""},on:{click:t.addProduct}},[e(u.a,[t._v("mdi-plus")])],1)],1),t._v(" "),e(s.b,[e(c.a,[e(f.a,[e(i.a,{attrs:{cols:"12",sm:"12",md:"4"}},[e(m.a,{attrs:{items:t.products,"item-text":"name","item-value":"id",label:"Select Product",rules:[t.rules.required],name:"editedItem.productId","persistent-hint":"",readonly:"","single-line":""},on:{focus:function(e){return t.$store.dispatch("_fetchproducts")}},model:{value:t.editedItem.productId,callback:function(e){t.$set(t.editedItem,"productId",e)},expression:"editedItem.productId"}})],1),t._v(" "),e(i.a,{attrs:{cols:"12",sm:"12",md:"4"}},[e(m.a,{attrs:{items:t.meters,"item-text":"meterNumber","item-value":"serialNumber",label:"Select Meter",rules:[t.rules.required],name:"editedItem.productId","persistent-hint":"","single-line":""},on:{focus:function(e){return t.$store.dispatch("_fetchmeters")}},model:{value:t.editedItem.serialNumber,callback:function(e){t.$set(t.editedItem,"serialNumber",e)},expression:"editedItem.serialNumber"}})],1),t._v(" "),e(i.a,{attrs:{cols:"12",sm:"12",md:"4"}},[e(v.a,{attrs:{label:"Phone Number"},model:{value:t.editedItem.msisdn,callback:function(e){t.$set(t.editedItem,"msisdn",e)},expression:"editedItem.msisdn"}})],1),t._v(" "),e(i.a,{attrs:{cols:"12",sm:"12",md:"6"}},[e(v.a,{attrs:{label:"Amount "},model:{value:t.editedItem.amount,callback:function(e){t.$set(t.editedItem,"amount",e)},expression:"editedItem.amount"}})],1),t._v(" "),e(i.a,{attrs:{cols:"12",sm:"12",md:"6"}},[e(v.a,{attrs:{label:"Transaction Reference"},model:{value:t.editedItem.transactionRef,callback:function(e){t.$set(t.editedItem,"transactionRef",e)},expression:"editedItem.transactionRef"}})],1)],1)],1)],1),t._v(" "),e(s.a,[e(p.a),t._v(" "),e(a.a,{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" Cancel ")]),t._v(" "),e(a.a,{attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v(" Save ")])],1)],1)],1),t._v(" "),e(d.a,{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[e(n.a,[e(s.c,{staticClass:"text-h5"},[t._v("Are you sure you want to delete this item?")]),t._v(" "),e(s.a,[e(p.a),t._v(" "),e(a.a,{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("Cancel")]),t._v(" "),e(a.a,{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("OK")]),t._v(" "),e(p.a)],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(r){var a=r.item;return["paid"!=a.status?e(c.a,[e(u.a,{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(a)}}},[t._v(" mdi-pencil ")])],1):t._e()]}},{key:"item.status",fn:function(r){var a=r.item;return[e(o.a,{attrs:{small:"",color:"success",label:"","text-color":"white"}},[e(u.a,{attrs:{color:t.getStatusColor(a.statusCode),left:""}},[t._v("\n        mdi-label\n      ")]),t._v("\n      "+t._s(a.status.toUpperCase())+"\n    ")],1)]}},{key:"no-data",fn:function(){return[e(a.a,{attrs:{color:"primary"}},[t._v(" Reset ")])]},proxy:!0}],null,!1,3638461618)}):e("skeleton-table-loader")}),[],!1,null,null,null);e.default=x.exports}}]);