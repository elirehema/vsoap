(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{643:function(e,t,r){"use strict";r.r(t);var a=r(626),s=r(476),n=r(497),i=r(495),o=r(550),c=r(523),d=r(494),l=r(628),u=r(541),m=r(131),f=r(525),p=r(489),h=r(568),v=r(62),b=r(499),_=(r(13),r(12),r(8),r(5),r(16),r(9),r(17),r(0)),k=r(114);function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){Object(_.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var I={data:function(){return{dialog:!1,dialogDelete:!1,headers:[{text:"Order No.#",value:"orderNumber"},{text:"Total Amount",value:"amount"},{text:"Status",value:"status"},{text:"Created On",value:"createdAt"},{text:"Updated On",value:"updatedAt"}],ords:[],editedIndex:-1,rules:{required:function(e){return!!e||"Field Required"}},editedItem:{productId:2},paymentreq:{action:400,orderId:null},defaultItem:{productId:2}}},computed:y(y({},Object(k.c)({orders:"tokenpurchases",products:"products",meters:"meters"})),{},{formTitle:function(){return-1===this.editedIndex?"Token Purchase":"Edit customer"}}),created:function(){this.$store.dispatch("_fetchtokenpurchases")},methods:{close:function(){var e=this;this.dialog=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},closeDelete:function(){var e=this;this.dialogDelete=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},addProduct:function(){this.ords.push(this.editedItem)},makeOrderPayment:function(e){var t=this;this.paymentreq.action=e,this.$store.dispatch("_makeorderpayment",this.paymentreq).then((function(e){t.editdialog=!1}))},save:function(){this.editedIndex>-1||this.$store.dispatch("_placenewtokenorder",this.editedItem),this.close()},handleRowClick:function(e){this.$router.push("/purchases/".concat(e.id))},getStatusColor:function(e){switch(e){case"100":default:return"white";case"200":return"success lighten-3";case"300":return"blue lighten-3";case"400":return"teal";case"500":return"red lighten-4"}}}},g=r(61),O=Object(g.a)(I,(function(){var e=this,t=e._self._c;return e.orders?t(l.a,{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.orders,"sort-by":"calories"},on:{"click:row":e.handleRowClick},scopedSlots:e._u([{key:"top",fn:function(){return[t(v.a,{attrs:{color:"primary",flat:""}},[t(b.a,{staticClass:"text-h5 font-weight-bold white--text"},[e._v("Token Purchases")]),e._v(" "),t(p.a),e._v(" "),t(u.a,{attrs:{"max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function(r){var a=r.on,n=r.attrs;return[t(s.a,e._g(e._b({staticClass:"mb-2 px-4",attrs:{color:"success",dark:""}},"v-btn",n,!1),a),[t(m.a,{attrs:{left:""}},[e._v(" mdi-plus ")]),e._v("\n            Buy Token\n          ")],1)]}}],null,!1,3421704071),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e._v(" "),t(n.a,[t(v.a,{attrs:{color:"primary",flat:"",dark:""}},[t(b.a,[t("span",{staticClass:"text-h5"},[e._v(e._s(e.formTitle))])])],1),e._v(" "),t(i.b,[t(d.a,[t(f.a,[e._e(),e._v(" "),t(c.a,{attrs:{cols:"12",sm:"12",md:"6"}},[t(a.a,{attrs:{items:e.meters,"item-text":"meterNumber","item-value":"serialNumber",label:"Select Meter",rules:[e.rules.required],name:"editedItem.productId","persistent-hint":"","single-line":""},on:{focus:function(t){return e.$store.dispatch("_fetchmeters")}},model:{value:e.editedItem.serialNumber,callback:function(t){e.$set(e.editedItem,"serialNumber",t)},expression:"editedItem.serialNumber"}})],1),e._v(" "),t(c.a,{attrs:{cols:"12",sm:"12",md:"6"}},[t(h.a,{attrs:{label:"Phone Number"},model:{value:e.editedItem.msisdn,callback:function(t){e.$set(e.editedItem,"msisdn",t)},expression:"editedItem.msisdn"}})],1),e._v(" "),t(c.a,{attrs:{cols:"12",sm:"12",md:"6"}},[t(h.a,{attrs:{label:"Amount "},model:{value:e.editedItem.amount,callback:function(t){e.$set(e.editedItem,"amount",t)},expression:"editedItem.amount"}})],1),e._v(" "),t(c.a,{attrs:{cols:"12",sm:"12",md:"6"}},[t(h.a,{attrs:{label:"Transaction Reference"},model:{value:e.editedItem.transactionRef,callback:function(t){e.$set(e.editedItem,"transactionRef",t)},expression:"editedItem.transactionRef"}})],1)],1)],1)],1),e._v(" "),t(i.a,[t(p.a),e._v(" "),t(s.a,{staticClass:"px-4",attrs:{color:"primary lighten-1",small:""},on:{click:e.close}},[e._v(" Cancel ")]),e._v(" "),t(s.a,{staticClass:"px-4",attrs:{color:"warning darken-1",small:""},on:{click:e.save}},[e._v(" Purchase ")])],1)],1)],1)],1)]},proxy:!0},{key:"item.updatedAt",fn:function(r){var a=r.item;return[t("span",[e._v(e._s(e._f("dateformat")(a.updatedAt)))])]}},{key:"item.createdAt",fn:function(r){var a=r.item;return[t("span",[e._v(e._s(e._f("dateformat")(a.createdAt)))])]}},{key:"item.orderNumber",fn:function(r){var a=r.item;return[t("span",{staticClass:"d-inline-block text-truncate",staticStyle:{"max-width":"150px"}},[e._v(e._s(a.orderNumber))])]}},{key:"item.status",fn:function(r){var a=r.item;return[t(o.a,{attrs:{small:"",color:"success",label:"","text-color":"white"}},[t(m.a,{attrs:{color:e.getStatusColor(a.statusCode),left:""}},[e._v("\n        mdi-label\n      ")]),e._v("\n      "+e._s(a.status.toUpperCase())+"\n    ")],1)]}},{key:"no-data",fn:function(){return[t(s.a,{attrs:{color:"primary"}},[e._v(" Reset ")])]},proxy:!0}],null,!1,1264211191)}):t("skeleton-table-loader")}),[],!1,null,null,null);t.default=O.exports}}]);